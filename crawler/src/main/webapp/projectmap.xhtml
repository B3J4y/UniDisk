<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>
    <meta charset="utf-8"></meta>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no"></meta>
    <title>UniDisk</title>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css"></link>
    <link rel="stylesheet" href="/assets/css/styles.min.css?h=c1c875adbe3423b81e6840c89217b6d0"></link>
    <script src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/build/ol.js"/>
    <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL"/>

    <h:outputStylesheet library="css" name="styles.css"  />

</h:head>

<f:metadata>
    <f:viewParam name="projectId" value="#{variablesView.projectId}"
                 required="#{not facesContext.postback}" requiredMessage="Keine Projekt ID gesetzt."/>
    <f:viewAction action="#{projectResultTable.load(variablesView.projectId)}" />

</f:metadata>

<h:body>

    <h:outputStylesheet library="css" name="styles.css"  />
    <c:if test="#{not projectResultTable.projectExists()}"><p style="text-align: center;">Unbekanntes Projekt</p></c:if>
    <c:if test="#{projectResultTable.projectExists() and projectResultTable.hasResults()}">

        <div class="col-lg-8" style="max-height: 80%; margin-left: 16.66%;">
            <div id="map" class="map" style="height: 60%;"></div>


            <p:dataTable id="projectResultMapLegend"
                         emptyMessage="Keine StichwÃ¶rter zugeordnet"
                         var="item"
                         value="#{projectResultTable.mapLegendItems}" scrollable="false" scrollHeight="200">


                <p:column headerText="Legende" >
                    <p:graphicImage url="#{item.iconUrl}" style="width: 30px; height: 30px; margin-right: 16px;"/>
                    <h:outputText value="#{item.name}" />
                </p:column>

            </p:dataTable>
        </div>
    </c:if>
    <c:if test="#{projectResultTable.projectExists() and not projectResultTable.hasResults()}">
        <p style="text-align: center;">Das Projekt hat noch keine Ergebnisse.</p>
    </c:if>

    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="js/map.js"></script>

</h:body>
</html>
