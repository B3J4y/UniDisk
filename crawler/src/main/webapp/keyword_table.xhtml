<!--
Include Parameter:
    - updateOnDelete
        Ids von Elementen, die nach Löschen eines Themas geupdated
        werden sollen
    - updateOnCreated
        Ids von Elementen, die nach der Erstellung eines Themas geupdated
        werden sollen
    - updateOnRowSelect
        Ids von Elementen, die nach der Auswahl eines Themas geupdated
        werden sollen
    - updateOnRowDeselect
        Ids von Elementen, die nach der Auswahl eines Themas geupdated
        werden sollen
-->

<ui:composition
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:panelGroup id="testTable" layout="block">
        <c:if test="#{projectTopicTable.isTopicSet()}">

            <p:dataTable id="projectTopicKeywords"

                         emptyMessage="Keine Stichwörter zugeordnet"
                         var="keyword"
                         class="main-table"
                         style="margin-bottom: 16px;"
                         value="#{projectTopicTable.selectedTopicKeywords}" scrollable="true" scrollHeight="200">
                <p:column headerText="Stichworte">
                    <h:outputText value="#{keyword.name}" />

                    <div style="float:right;">
                        <c:if test="#{projectTopicTable.canEdit()}">
                            <p:commandButton value="-" update="testTable"
                                             action="#{projectTopicTable.deleteKeyword(keyword.id)}" />
                        </c:if>
                    </div>
                </p:column>

            </p:dataTable>

            <c:if test="#{projectTopicTable.canEdit()}">
                <h:form id="newKeywordForm">
                    <p:panelGrid columns="1" layout="grid"  styleClass="ui-noborder">
                    <h:outputText value="Neues Stichwort" />

                    <p:remoteCommand name="addNewKeyword" update="projectTopicKeywords newKeywordForm" actionListener="#{projectTopicTable.addKeyword}"/>

                    <p:panelGrid columns="3" layout="grid"  styleClass="ui-noborder">
                        <p:inputText placeholder="Stichwort..." value="#{projectTopicTable.newKeyword}"
                                     id="newKeywordInput"
                                     onkeypress="if (event.keyCode == 13) { addNewKeyword(); return false; }"
                        />
                        <p:watermark for="newKeywordInput" value="Stichwort..." id="watermark_newKeywordInput" />
                        <p:commandButton style="margin-left: 16px;" value="+" update="#{addNewKeyword}" action="#{projectTopicTable.addKeyword}"/>
                    </p:panelGrid>



                    <h:outputText value="#{projectTopicTable.newKeywordError}" />
                    </p:panelGrid>
                </h:form>
            </c:if>
        </c:if>
        <h:outputText id="projectTopicKeywordsEmpty" value="Kein Thema ausgewählt" class="selection-empty" rendered="#{not projectTopicTable.isTopicSet()}"/>
    </h:panelGroup>
</ui:composition>